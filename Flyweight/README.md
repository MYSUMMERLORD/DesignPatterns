# Flyweight享元模式--对象结构性模式

## 意图

运用共享技术有效地支持大量细粒度的对象

## 适用性

Flyweight模式的有效性很大程度上取决于如何使用它以及在何处使用它。
当下面情况都成立时使用Flyweight模式：

* 一个应用使用了大量的对象
* 完全由于使用大量的对象，造成很大的存储开销
* 对象的大多数状态都可变为外部状态
* 如果删除对象的外部状态，那么可以用相对较少的共享对象取代很多组对象
* 应用程序不依赖于对象标识

## 作用过程

* Flyweight运行时所需的状态必定是内部或外部的。内部状态存储于ConcreteFlyweight对象之中；而外部对象则由Client对象存储或计算，当用户调用Flyweight对象的操作时，将该状态传递给它
* 用户不应直接对ConcreteFlyweight类进行实例化，而只能从FlyweightFactory对象得到ConcreteFlyweight对象，这可以保证对它们适当的进行共享


## Flyweight-模式优点

使用Flyweight模式时，传输、查找和计算外部状态都会产生运行时的开销，尤其当Flyweight原先被存储为内部状态时。然而，空间上的节省抵消了这些开销，共享的Flyweight越多，空间节省也就越大

存储节约由以下几个因素决定：

* 因为共享，实例总数减少的数目
* 对象内部状态的平均数目
* 外部状态时计算的还是存储的

用共享减少内部状态的消耗，用计算时间换取对外部状态的存储
