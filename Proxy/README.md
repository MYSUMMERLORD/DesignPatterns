# Proxy代理--对象结构型模式

## 意图

为其它对象提供一种代理以控制对这个对象的访问。对一个对象进行访问控制是为了只有在我们确定需要这个对象时，才对它进行创建和初始化。

## 常见的代理模式

* 远程代理Remote Proxy：为一个对象在不同的地址空间提供局部代表
* 虚代理Virtual Proxy：根据需要创建开销很大的对象。将开销很大的对象延迟到真正需要时才去创建。例如图片预加载
* 保护代理Protection Proxy：控制对原始对象的访问，保护代理用于对象应该有不同的访问权限的时候
* 智能指引Smart Reference取代了简单的指针，它在访问对象时执行一些附加操作，典型用途包括：
    1. 对指向实际对象的引用计数，这样当该对象没有引用时，可以释放它
    2. 当第一次引入一个持久对象时，将它装进内存
    3. 在访问一个实际对象前，检查是否已经锁定了它，以确保其他对象不能改变它

## Proxy代理-模式优点

Proxy在访问对象时引入了一定程度的间接性。根据代理的不同，附加的间接性有多种用途：

* Remote Proxy可以隐藏一个对象存在于不同地址空间的事实 
* Virtual Proxy可以进行最优化，例如根据要求创建对象
* Protection Proxy和Smart Reference都允许在访问一个对象时，有一些附件的内务处理

